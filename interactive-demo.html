<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aqumen Demo - Interactive Version</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .demo-container {
            display: none;
        }
        .demo-container.active {
            display: block;
        }
        .toggle-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        .toggle-btn {
            padding: 10px 20px;
            background: #4F46E5;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
        }
        .toggle-btn.active {
            background: #059669;
        }
        .toggle-btn:hover {
            opacity: 0.9;
        }
        .version-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            background: rgba(0,0,0,0.8);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            max-width: 200px;
        }
        
        /* Custom styles for the demo */
        .error-span-interactive {
            display: inline-block;
            margin: 0 2px;
            transition: all 0.2s ease;
        }
        
        .error-span-interactive:hover {
            transform: scale(1.05);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="toggle-buttons">
        <button id="originalBtn" class="toggle-btn active">Interactive Demo</button>
        <button id="archBtn" class="toggle-btn">Architecture Info</button>
    </div>
    
    <div id="versionIndicator" class="version-indicator">
        üöÄ Interactive Demo - Click buttons and try the features!
    </div>

    <div id="interactiveDemo" class="demo-container active">
        <!-- Interactive demo will be rendered here -->
    </div>
    
    <div id="archDemo" class="demo-container">
        <div class="max-w-4xl mx-auto p-6 bg-gradient-to-br from-gray-900 to-blue-900 min-h-screen text-white">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4">
                    Architecture Overview
                </h1>
                <p class="text-xl text-gray-300 mb-8">
                    Original Monolithic vs Modular Component Architecture
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-gray-800/50 backdrop-blur rounded-lg p-6 border-l-4 border-red-500">
                    <h2 class="text-2xl font-bold mb-4 text-red-400">üìÑ Original Version</h2>
                    <div class="space-y-3 text-sm text-gray-300">
                        <p><strong>Structure:</strong> Single monolithic file</p>
                        <p><strong>Size:</strong> 676 lines in one component</p>
                        <p><strong>State:</strong> All useState hooks together</p>
                        <p><strong>Logic:</strong> All functions inline</p>
                        <p><strong>UI:</strong> One massive return statement</p>
                        <p><strong>Data:</strong> Hardcoded sample data</p>
                    </div>
                </div>

                <div class="bg-gray-800/50 backdrop-blur rounded-lg p-6 border-l-4 border-green-500">
                    <h2 class="text-2xl font-bold mb-4 text-green-400">üì¶ Modular Version</h2>
                    <div class="space-y-3 text-sm text-gray-300">
                        <p><strong>Structure:</strong> 13 focused modules</p>
                        <p><strong>Components:</strong> 9 reusable UI components</p>
                        <p><strong>State:</strong> 3 custom React hooks</p>
                        <p><strong>Logic:</strong> Separated utility functions</p>
                        <p><strong>UI:</strong> Individual component files</p>
                        <p><strong>Data:</strong> Dedicated constants file</p>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-gray-800/50 backdrop-blur rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-center">Key Improvements</h3>
                <div class="grid md:grid-cols-3 gap-6 text-sm">
                    <div class="text-center">
                        <div class="text-2xl mb-2">üîß</div>
                        <h4 class="font-semibold text-blue-300 mb-2">Maintainability</h4>
                        <p class="text-gray-400">Each component has a single responsibility making it easier to debug and modify</p>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">üß™</div>
                        <h4 class="font-semibold text-green-300 mb-2">Testability</h4>
                        <p class="text-gray-400">Components and hooks can be tested individually with clear input/output</p>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">üîÑ</div>
                        <h4 class="font-semibold text-purple-300 mb-2">Reusability</h4>
                        <p class="text-gray-400">Components and utilities can be reused across different parts of the application</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Sample data for the demo
        const samplePipelineData = {
            'Machine Learning - Reinforcement Learning': {
                difficultyCategories: {
                    "Beginner": ["Q-learning basics", "Markov Decision Processes", "Reward function design"],
                    "Intermediate": ["Policy gradient methods", "Actor-Critic architectures", "Exploration vs exploitation"],
                    "Advanced": ["Multi-agent RL", "Hierarchical RL", "Meta-learning in RL"]
                },
                finalQuestion: {
                    title: "Q-Learning Implementation Error Detection",
                    code: `def epsilon_greedy_policy(Q_values, epsilon=0.1):
    """Select action using epsilon-greedy strategy"""
    if np.random.random() < epsilon:
        # Exploration: choose random action
        return <span class="error-span tight" data-error-id="1" data-concept="exploration_exploit">np.argmax(Q_values)</span>
    else:
        # Exploitation: choose best action
        return <span class="error-span loose" data-error-id="2" data-concept="exploration_exploit">np.random.choice(len(Q_values))</span>

def update_q_table(Q, state, action, reward, next_state, alpha=0.1, gamma=0.9):
    """Update Q-table using Bellman equation"""
    current_q = Q[state][action]
    max_next_q = np.max(Q[next_state])
    
    # Temporal difference update
    Q[state][action] = current_q + alpha * <span class="error-span tight" data-error-id="3" data-concept="bellman_update">(reward + gamma * max_next_q - current_q)</span>
    
    return Q`,
                    errors: [
                        {
                            id: "1",
                            description: "Should use np.random.choice() for exploration, not np.argmax()",
                            severity: "high",
                            concept: "exploration_exploit",
                            span_tightness: "tight",
                            inspired_by_haiku: true
                        },
                        {
                            id: "2", 
                            description: "Should use np.argmax() for exploitation, not random choice",
                            severity: "high",
                            concept: "exploration_exploit",
                            span_tightness: "loose",
                            inspired_by_haiku: true
                        },
                        {
                            id: "3",
                            description: "Bellman update is actually correct - this is a trick question",
                            severity: "trick",
                            concept: "bellman_update",
                            span_tightness: "tight",
                            inspired_by_haiku: false
                        }
                    ]
                }
            }
        };

        // Mock icons (simplified versions)
        const MockIcon = ({ className, children }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '16px'}}>
                {children || 'üîπ'}
            </span>
        );

        const InteractiveDemo = () => {
            const [currentStep, setCurrentStep] = useState('input');
            const [userTopic, setUserTopic] = useState('');
            const [difficultyCategories, setDifficultyCategories] = useState(null);
            const [selectedSubtopic, setSelectedSubtopic] = useState(null);
            const [finalQuestion, setFinalQuestion] = useState(null);
            const [clicks, setClicks] = useState([]);
            const [showResults, setShowResults] = useState(false);
            const [isGenerating, setIsGenerating] = useState(false);
            const [generationLog, setGenerationLog] = useState([]);
            const [adversarialAttempts, setAdversarialAttempts] = useState([]);
            const [showDevMode, setShowDevMode] = useState(false);
            const [retryCount, setRetryCount] = useState(0);

            const addLog = (message) => {
                setGenerationLog(prev => [...prev, { 
                    timestamp: new Date().toLocaleTimeString(), 
                    message 
                }]);
            };

            const showAttemptInProgress = (attempt) => {
                setAdversarialAttempts(prev => [...prev, {
                    attempt: attempt,
                    status: 'testing',
                    sonnetResponse: 'Analyzing...',
                    haikuResponse: 'Generating...',
                    timestamp: Date.now()
                }]);
            };

            const updateAttemptResults = (attempt, sonnetResult, haikuResult) => {
                setAdversarialAttempts(prev => prev.map(att => 
                    att.attempt === attempt 
                        ? {
                            ...att,
                            sonnetResponse: attempt <= 2 ? "‚úÖ Correctly identifies the error" : "‚úÖ Provides comprehensive analysis",
                            haikuResponse: attempt <= 2 ? "‚ùå Misses the conceptual issue" : attempt === 3 ? "‚úÖ Actually got it right (retry needed)" : "‚ùå Falls for the semantic trap"
                          }
                        : att
                ));
            };

            const updateAttemptStatus = (attempt, status) => {
                setAdversarialAttempts(prev => prev.map(att => 
                    att.attempt === attempt ? { ...att, status } : att
                ));
            };

            const makeAPICall = async (operation) => {
                await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
                if (Math.random() < 0.1) {
                    throw new Error("Model differentiation failed - retry needed");
                }
                return "Sample API response for demo";
            };

            const generateDifficultyCategories = async (topic) => {
                setIsGenerating(true);
                addLog(`üìä Starting pipeline for: ${topic}`);
                
                try {
                    await makeAPICall("Generating difficulty categories (Sonnet)");
                    
                    const categories = samplePipelineData[topic]?.difficultyCategories || {
                        "Beginner": ["Basic concepts", "Fundamentals", "Introduction"],
                        "Intermediate": ["Applied knowledge", "Problem solving", "Integration"],
                        "Advanced": ["Complex scenarios", "Optimization", "Research-level"]
                    };
                    
                    setDifficultyCategories(categories);
                    setCurrentStep('difficulty');
                    addLog("‚úÖ Difficulty categories generated");
                    
                } catch (error) {
                    addLog(`‚ùå Error: ${error.message}`);
                } finally {
                    setIsGenerating(false);
                }
            };

            const runAdversarialPipeline = async (difficulty, subtopic) => {
                setIsGenerating(true);
                setRetryCount(0);
                setAdversarialAttempts([]);
                addLog(`üéØ Running adversarial pipeline for ${subtopic} (${difficulty})`);

                try {
                    addLog("üß† Step 2: Generating conceptual error catalog (Opus)");
                    await makeAPICall("Error catalog generation (Opus)");
                    
                    addLog("üéØ Step 3: Generating adversarial question (Opus)");
                    await makeAPICall("Question generation (Opus)");

                    let success = false;
                    let attempts = 0;
                    const maxAttempts = 3;

                    while (!success && attempts < maxAttempts) {
                        attempts++;
                        setRetryCount(attempts);
                        
                        showAttemptInProgress(attempts);
                        addLog(`üîÑ Attempt ${attempts}: Testing model differentiation`);

                        await Promise.all([
                            makeAPICall("Sonnet validation"),
                            makeAPICall("Haiku testing")
                        ]);

                        updateAttemptResults(attempts);
                        addLog("‚öñÔ∏è Step 6: Judging model responses (Opus)");
                        await makeAPICall("Response judgment (Opus)");

                        success = attempts >= 2 || Math.random() > 0.3;
                        
                        if (!success && attempts < maxAttempts) {
                            addLog(`‚ùå Attempt ${attempts} failed: Insufficient differentiation, retrying...`);
                            updateAttemptStatus(attempts, 'failed');
                            await new Promise(resolve => setTimeout(resolve, 1000));
                        } else if (success) {
                            updateAttemptStatus(attempts, 'success');
                        }
                    }

                    if (success) {
                        addLog("‚úÖ Pipeline successful: Model differentiation achieved");
                        addLog("üìù Step 7: Creating student assessment (Opus)");
                        await makeAPICall("Student question creation (Opus)");
                        
                        const finalQ = samplePipelineData[userTopic]?.finalQuestion || {
                            title: "Error Detection Exercise",
                            code: "Sample code with potential errors...",
                            errors: []
                        };
                        setFinalQuestion(finalQ);
                        setCurrentStep('assessment');
                        
                    } else {
                        addLog(`‚ùå Pipeline failed after ${maxAttempts} attempts`);
                    }

                } catch (error) {
                    addLog(`‚ùå Pipeline error: ${error.message}`);
                } finally {
                    setIsGenerating(false);
                }
            };

            const handleErrorClick = (errorId) => {
                const newClicks = new Set(clicks);
                if (newClicks.has(errorId)) {
                    newClicks.delete(errorId);
                } else {
                    newClicks.add(errorId);
                }
                setClicks(Array.from(newClicks));
            };

            const evaluateResponse = () => {
                if (!finalQuestion) return;

                const correctErrors = new Set(
                    finalQuestion.errors
                        .filter(e => e.severity !== 'trick')
                        .map(e => e.id)
                );
                const selectedErrors = new Set(clicks);

                const intersection = new Set([...selectedErrors].filter(x => correctErrors.has(x)));
                const precision = selectedErrors.size > 0 ? intersection.size / selectedErrors.size : 0;
                const recall = correctErrors.size > 0 ? intersection.size / correctErrors.size : 0;
                const f1 = precision + recall > 0 ? 2 * (precision * recall) / (precision + recall) : 0;
                
                setShowResults({
                    precision,
                    recall,
                    f1,
                    correctErrors,
                    selectedErrors,
                    haiku_inspired_errors: finalQuestion.errors.filter(e => e.inspired_by_haiku).length
                });
            };

            const renderCodeWithErrors = (code) => {
                if (!finalQuestion) return code;
                
                return { __html: code.replace(
                    /<span class="error-span ([^"]*)" data-error-id="([^"]*)" data-concept="([^"]*)">(.*?)<\/span>/g,
                    (match, classes, errorId, concept, content) => {
                        const isSelected = clicks.includes(errorId);
                        const error = finalQuestion.errors.find(e => e.id === errorId);
                        const tightnessClass = classes.includes('tight') ? 'border-2' : 'border';
                        const selectedClass = isSelected ? 'bg-red-100 border-red-500 text-black' : 'bg-yellow-100 border-yellow-500 text-black';
                        
                        return `<span 
                            class="error-span-interactive ${tightnessClass} ${selectedClass} px-1 rounded cursor-pointer hover:bg-red-50 transition-colors" 
                            onclick="window.handleErrorClick('${errorId}')"
                            title="Click to select/deselect | Concept: ${concept} | Severity: ${error?.severity || 'unknown'}"
                        >${content}</span>`;
                    }
                )};
            };

            // Make error click handler available globally
            useEffect(() => {
                window.handleErrorClick = handleErrorClick;
            }, [clicks]);

            return (
                <div className="max-w-7xl mx-auto p-6 bg-gradient-to-br from-gray-900 to-blue-900 min-h-screen text-white">
                    {/* Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-5xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4">
                            Aqumen.ai Interactive Demo
                        </h1>
                        <p className="text-xl text-gray-300 mb-4">
                            Multi-Model Adversarial Pipeline for Intelligent Error Detection
                        </p>
                        <div className="flex justify-center items-center gap-4 text-sm text-gray-400">
                            <div className="flex items-center gap-1">
                                <MockIcon>üß†</MockIcon>
                                <span>Opus: Analysis & Judgment</span>
                            </div>
                            <div className="flex items-center gap-1">
                                <MockIcon>üéØ</MockIcon>
                                <span>Sonnet: Sweet Spot Validation</span>
                            </div>
                            <div className="flex items-center gap-1">
                                <MockIcon>‚ö°</MockIcon>
                                <span>Haiku: Authentic Weak Errors</span>
                            </div>
                        </div>
                    </div>

                    {/* Step 1: Topic Input */}
                    {currentStep === 'input' && (
                        <div className="bg-gray-800/50 backdrop-blur rounded-lg shadow-xl p-8 mb-6">
                            <h2 className="text-3xl font-bold mb-6 text-center">Enter Assessment Topic</h2>
                            <div className="max-w-2xl mx-auto">
                                <div className="mb-6">
                                    <label className="block text-lg font-medium mb-2">Domain/Subject:</label>
                                    <input
                                        type="text"
                                        value={userTopic}
                                        onChange={(e) => setUserTopic(e.target.value)}
                                        placeholder="e.g., Machine Learning - Reinforcement Learning"
                                        className="w-full p-4 text-lg bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"
                                    />
                                </div>
                                <div className="text-center">
                                    <button
                                        onClick={() => generateDifficultyCategories(userTopic)}
                                        disabled={!userTopic.trim() || isGenerating}
                                        className="px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold disabled:opacity-50 hover:from-blue-700 hover:to-purple-700 transition-all"
                                    >
                                        {isGenerating ? (
                                            <div className="flex items-center gap-2">
                                                <div className="loading-spinner"></div>
                                                Analyzing Topic...
                                            </div>
                                        ) : (
                                            'Start Pipeline Analysis'
                                        )}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Step 2: Difficulty Selection */}
                    {currentStep === 'difficulty' && difficultyCategories && (
                        <div className="bg-gray-800/50 backdrop-blur rounded-lg shadow-xl p-8 mb-6">
                            <h2 className="text-3xl font-bold mb-6">Select Difficulty & Subtopic</h2>
                            
                            {Object.entries(difficultyCategories).map(([difficulty, subtopics]) => (
                                <div key={difficulty} className="mb-8">
                                    <h3 className="text-2xl font-semibold mb-4 text-blue-300">{difficulty} Level</h3>
                                    <div className="grid md:grid-cols-3 gap-4">
                                        {subtopics.map((subtopic) => (
                                            <button
                                                key={subtopic}
                                                onClick={() => {
                                                    setSelectedSubtopic(subtopic);
                                                    runAdversarialPipeline(difficulty, subtopic);
                                                }}
                                                disabled={isGenerating}
                                                className="p-4 bg-gray-700 border border-gray-600 rounded-lg hover:border-blue-500 hover:bg-gray-600 transition-all text-left disabled:opacity-50"
                                            >
                                                <div className="font-medium text-gray-200">{subtopic}</div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {/* Generation Log */}
                    {generationLog.length > 0 && (
                        <div className="space-y-6">
                            <div className="bg-gray-800/50 backdrop-blur rounded-lg shadow-xl p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <h3 className="text-xl font-bold flex items-center gap-2">
                                        <MockIcon>‚öôÔ∏è</MockIcon>
                                        Pipeline Execution Log
                                    </h3>
                                    <div className="flex items-center gap-4 text-sm text-gray-400">
                                        {retryCount > 0 && (
                                            <div className="flex items-center gap-1">
                                                <MockIcon>üîÑ</MockIcon>
                                                <span>Retry: {retryCount}/5</span>
                                            </div>
                                        )}
                                        <button
                                            onClick={() => setShowDevMode(!showDevMode)}
                                            className="flex items-center gap-1 px-2 py-1 bg-gray-700 rounded text-xs hover:bg-gray-600"
                                        >
                                            <MockIcon>{showDevMode ? 'üôà' : 'üëÅÔ∏è'}</MockIcon>
                                            Dev Mode
                                        </button>
                                    </div>
                                </div>
                                
                                <div className={`space-y-2 ${showDevMode ? 'max-h-96 overflow-y-auto' : 'max-h-32 overflow-hidden'}`}>
                                    {generationLog.map((log, index) => (
                                        <div key={index} className="flex items-start gap-3 text-sm">
                                            <span className="text-gray-500 font-mono text-xs">{log.timestamp}</span>
                                            <span className="text-gray-300">{log.message}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Adversarial Attempts */}
                            {adversarialAttempts.length > 0 && (
                                <div className="bg-gradient-to-r from-purple-800/30 to-red-800/30 rounded-lg p-6">
                                    <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                                        <MockIcon>üéØ</MockIcon>
                                        Live Adversarial Loop
                                    </h3>
                                    <div className="space-y-4">
                                        {adversarialAttempts.map((attempt) => (
                                            <div key={attempt.attempt} className="bg-gray-800/50 rounded-lg p-4 border-l-4 border-purple-500">
                                                <div className="flex justify-between items-center mb-3">
                                                    <span className="font-medium">Attempt {attempt.attempt}/5</span>
                                                    <span className={`px-2 py-1 rounded text-xs ${
                                                        attempt.status === 'success' ? 'bg-green-600 text-green-100' : 
                                                        attempt.status === 'failed' ? 'bg-red-600 text-red-100' :
                                                        'bg-yellow-600 text-yellow-100'
                                                    }`}>
                                                        {attempt.status.toUpperCase()}
                                                    </span>
                                                </div>
                                                <div className="grid grid-cols-2 gap-4 text-sm">
                                                    <div className="bg-blue-900/30 p-3 rounded">
                                                        <div className="font-medium text-blue-300 mb-1">Sonnet Response:</div>
                                                        <div className="text-gray-300">{attempt.sonnetResponse}</div>
                                                    </div>
                                                    <div className="bg-red-900/30 p-3 rounded">
                                                        <div className="font-medium text-red-300 mb-1">Haiku Response:</div>
                                                        <div className="text-gray-300">{attempt.haikuResponse}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Assessment Question */}
                    {currentStep === 'assessment' && finalQuestion && (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-r from-purple-800/50 to-blue-800/50 rounded-lg p-6">
                                <h2 className="text-3xl font-bold mb-2">{finalQuestion.title}</h2>
                                <p className="text-gray-300 mb-4">
                                    Find conceptual errors in this {selectedSubtopic} implementation. Click on code sections you think contain errors.
                                </p>
                                
                                <div className="flex items-center gap-4 text-sm text-gray-400">
                                    <div className="flex items-center gap-1">
                                        <MockIcon>üß†</MockIcon>
                                        <span>Errors: {finalQuestion.errors.filter(e => e.inspired_by_haiku).length} Haiku-inspired</span>
                                    </div>
                                    <div className="flex items-center gap-1">
                                        <MockIcon>‚ö†Ô∏è</MockIcon>
                                        <span>Trick questions: {finalQuestion.errors.filter(e => e.severity === 'trick').length}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-gray-800/50 backdrop-blur rounded-lg p-6">
                                <h3 className="text-xl font-bold mb-4">Code to Review (Click on errors):</h3>
                                <pre className="bg-gray-900 p-6 rounded-lg overflow-x-auto text-sm">
                                    <code dangerouslySetInnerHTML={renderCodeWithErrors(finalQuestion.code)} />
                                </pre>
                            </div>

                            <div className="bg-gray-800/50 backdrop-blur rounded-lg p-6">
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-xl font-bold">Assessment Evaluation</h3>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={evaluateResponse}
                                            className="px-6 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-blue-700 transition-all"
                                        >
                                            Evaluate Response
                                        </button>
                                        <button
                                            onClick={() => {
                                                setCurrentStep('input');
                                                setUserTopic('');
                                                setClicks([]);
                                                setShowResults(false);
                                                setGenerationLog([]);
                                                setAdversarialAttempts([]);
                                            }}
                                            className="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"
                                        >
                                            New Assessment
                                        </button>
                                    </div>
                                </div>

                                {/* Results */}
                                {showResults && (
                                    <div className="mt-6 grid md:grid-cols-4 gap-4">
                                        <div className="bg-blue-900/30 border border-blue-600 rounded-lg p-4 text-center">
                                            <div className="text-2xl font-bold text-blue-300">{(showResults.precision * 100).toFixed(1)}%</div>
                                            <div className="text-sm text-blue-400">Precision</div>
                                        </div>
                                        <div className="bg-green-900/30 border border-green-600 rounded-lg p-4 text-center">
                                            <div className="text-2xl font-bold text-green-300">{(showResults.recall * 100).toFixed(1)}%</div>
                                            <div className="text-sm text-green-400">Recall</div>
                                        </div>
                                        <div className="bg-purple-900/30 border border-purple-600 rounded-lg p-4 text-center">
                                            <div className="text-2xl font-bold text-purple-300">{(showResults.f1 * 100).toFixed(1)}%</div>
                                            <div className="text-sm text-purple-400">F1 Score</div>
                                        </div>
                                        <div className="bg-yellow-900/30 border border-yellow-600 rounded-lg p-4 text-center">
                                            <div className="text-2xl font-bold text-yellow-300">{clicks.length}</div>
                                            <div className="text-sm text-yellow-400">Selected</div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <div className="mt-12 text-center text-gray-500 text-sm">
                        <p>
                            üöÄ Interactive Demo: Try entering "Machine Learning - Reinforcement Learning" to see the full pipeline!
                        </p>
                        <p className="mt-1">
                            This demonstrates both the original monolithic and modular architectures with identical functionality.
                        </p>
                    </div>
                </div>
            );
        };

        // Render the demo
        const root = ReactDOM.createRoot(document.getElementById('interactiveDemo'));
        root.render(<InteractiveDemo />);

        // Toggle functions
        function showInteractive() {
            document.getElementById('interactiveDemo').classList.add('active');
            document.getElementById('archDemo').classList.remove('active');
            document.getElementById('originalBtn').classList.add('active');
            document.getElementById('archBtn').classList.remove('active');
            document.getElementById('versionIndicator').textContent = 'üöÄ Interactive Demo - Click buttons and try the features!';
        }

        function showArchitecture() {
            document.getElementById('archDemo').classList.add('active');
            document.getElementById('interactiveDemo').classList.remove('active');
            document.getElementById('archBtn').classList.add('active');
            document.getElementById('originalBtn').classList.remove('active');
            document.getElementById('versionIndicator').textContent = 'üìö Architecture Info - Understanding the modular design';
        }

        // Add event listeners
        document.getElementById('originalBtn').addEventListener('click', showInteractive);
        document.getElementById('archBtn').addEventListener('click', showArchitecture);

        console.log('üéâ Interactive demo loaded! Try entering "Machine Learning - Reinforcement Learning" to see the full pipeline in action!');
    </script>
</body>
</html>